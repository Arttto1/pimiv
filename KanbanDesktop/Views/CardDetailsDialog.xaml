<Window x:Class="KanbanDesktop.Views.CardDetailsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Detalhes do Card"
        Height="550" Width="600"
        Background="{StaticResource BackgroundBlack}"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0">
            <TextBlock Text="Título" 
                       Foreground="{StaticResource TextWhite}" 
                       Margin="0,0,0,5"/>
            <TextBox x:Name="TitleTextBox" 
                     Height="35" 
                     FontSize="14"
                     Background="{StaticResource CardBlack}"
                     Foreground="{StaticResource TextWhite}"
                     BorderBrush="{StaticResource BorderGray}"
                     BorderThickness="1"
                     Padding="10,5"/>

            <TextBlock Text="Descrição" 
                       Foreground="{StaticResource TextWhite}" 
                       Margin="0,20,0,5"/>
            
            <Grid>
                <TextBox x:Name="DescriptionTextBox" 
                         Height="180" 
                         FontSize="14"
                         Background="{StaticResource CardBlack}"
                         Foreground="{StaticResource TextWhite}"
                         BorderBrush="{StaticResource BorderGray}"
                         BorderThickness="1"
                         Padding="10,5,45,5"
                         TextWrapping="Wrap"
                         AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto"/>
                
                <Button x:Name="RewriteButton"
                        Content="✨" 
                        Width="32" 
                        Height="32"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Margin="0,8,8,0"
                        Background="{StaticResource DarkGreen}"
                        Foreground="{StaticResource TextWhite}"
                        FontSize="16"
                        BorderThickness="0"
                        Cursor="Hand"
                        ToolTip="Reescrever com IA"
                        Click="RewriteButton_Click"/>
            </Grid>

            <TextBlock Text="Mover para coluna" 
                       Foreground="{StaticResource TextWhite}" 
                       Margin="0,20,0,5"/>
            <ComboBox x:Name="ColumnComboBox" 
                      Height="35" 
                      FontSize="14"
                      Background="{StaticResource CardBlack}"
                      Foreground="{StaticResource TextWhite}"
                      BorderBrush="{StaticResource BorderGray}"
                      BorderThickness="1"
                      DisplayMemberPath="Name">
                <ComboBox.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.WindowBrushKey}" Color="#2A2A2A"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#00AA00"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="White"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.WindowTextBrushKey}" Color="White"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="White"/>
                </ComboBox.Resources>
                <ComboBox.Style>
                    <Style TargetType="ComboBox">
                        <Setter Property="Background" Value="#2A2A2A"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="BorderBrush" Value="#555555"/>
                        <Setter Property="BorderThickness" Value="1"/>
                        <Setter Property="Padding" Value="10,5"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ComboBox">
                                    <Grid>
                                        <ToggleButton Name="ToggleButton"
                                                      Background="#2A2A2A"
                                                      BorderBrush="#555555"
                                                      BorderThickness="1"
                                                      Focusable="false"
                                                      IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                      ClickMode="Press">
                                            <ToggleButton.Template>
                                                <ControlTemplate TargetType="ToggleButton">
                                                    <Grid>
                                                        <Border Background="#2A2A2A"
                                                                BorderBrush="#555555"
                                                                BorderThickness="1"/>
                                                        <Path HorizontalAlignment="Right"
                                                              VerticalAlignment="Center"
                                                              Margin="0,0,10,0"
                                                              Data="M 0 0 L 4 4 L 8 0 Z"
                                                              Fill="White"/>
                                                    </Grid>
                                                </ControlTemplate>
                                            </ToggleButton.Template>
                                        </ToggleButton>
                                        <ContentPresenter Name="ContentSite"
                                                          IsHitTestVisible="False"
                                                          Content="{TemplateBinding SelectionBoxItem}"
                                                          ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                          ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                          Margin="10,5,30,5"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Left">
                                            <ContentPresenter.Resources>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Style>
                                            </ContentPresenter.Resources>
                                        </ContentPresenter>
                                        <Popup Name="Popup"
                                               Placement="Bottom"
                                               IsOpen="{TemplateBinding IsDropDownOpen}"
                                               AllowsTransparency="True"
                                               Focusable="False"
                                               PopupAnimation="Slide">
                                            <Grid Name="DropDown"
                                                  SnapsToDevicePixels="True"
                                                  MinWidth="{TemplateBinding ActualWidth}"
                                                  MaxHeight="200">
                                                <Border Background="#2A2A2A"
                                                        BorderThickness="1"
                                                        BorderBrush="#555555"/>
                                                <ScrollViewer Margin="1"
                                                              SnapsToDevicePixels="True">
                                                    <StackPanel IsItemsHost="True"
                                                                KeyboardNavigation.DirectionalNavigation="Contained"/>
                                                </ScrollViewer>
                                            </Grid>
                                        </Popup>
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ComboBox.Style>
                <ComboBox.ItemContainerStyle>
                    <Style TargetType="ComboBoxItem">
                        <Setter Property="Background" Value="#2A2A2A"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="Padding" Value="10,5"/>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#00AA00"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="#00AA00"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </ComboBox.ItemContainerStyle>
            </ComboBox>
        </StackPanel>

        <StackPanel Grid.Row="1" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,20,0,0">
            <Button Content="EXCLUIR" 
                    Width="100" 
                    Height="35"
                    Background="Red"
                    Foreground="{StaticResource TextWhite}"
                    BorderThickness="0"
                    Margin="0,0,10,0"
                    Cursor="Hand"
                    Click="Delete_Click"/>
            <Button Content="CANCELAR" 
                    Width="100" 
                    Height="35"
                    Background="{StaticResource BorderGray}"
                    Foreground="{StaticResource TextWhite}"
                    BorderThickness="0"
                    Margin="0,0,10,0"
                    Cursor="Hand"
                    Click="Cancel_Click"/>
            <Button Content="SALVAR" 
                    Width="100" 
                    Height="35"
                    Background="{StaticResource DarkGreen}"
                    Foreground="{StaticResource TextWhite}"
                    BorderThickness="0"
                    Cursor="Hand"
                    Click="Save_Click"/>
        </StackPanel>
    </Grid>
</Window>
